<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Smart Jar Registration</title>
    
    <link rel="stylesheet" href="primary.css" />
    
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
  </head>
  <body>
    <div class="app-container">
      <header>
        <div class="logo-icon"><i class="fa-solid fa-piggy-bank"></i></div>
        <div class="brand-text">
          <h1>SMART JAR</h1>
          <p>Small Change, Big Dreams</p>
        </div>
      </header>

      <h2 class="form-title">CREATE ACCOUNT</h2>

      <form id="registrationForm">
        <div class="form-group">
          <label>Username</label>
          <input type="text" required />
        </div>

        <div class="form-group">
          <label>Email</label>
          <input type="email" placeholder="email@example.com" required />
        </div>

        <div class="form-group">
          <label>Phone Number</label>
          <input
            type="text"
            id="phoneInput"
            placeholder="09123456789"
            required
          />
        </div>

        <div class="form-row">
          <div class="form-col form-group">
            <label>Birth Date</label>
            <input type="date" />
          </div>
          <div class="form-col form-group">
            <label>Gender</label>
            <select>
              <option value="" disabled selected></option>
              <option value="male">Male</option>
              <option value="female">Female</option>
            </select>
          </div>
        </div>

        <div class="form-group">
          <label>Address</label>
          <input type="text" />
        </div>

        <div class="form-row">
          <div class="form-col form-group">
            <label>City</label>
            <input type="text" />
          </div>
          <div class="form-col form-group">
            <label>Region</label>
            <input type="text" />
          </div>
        </div>

        <div class="form-group">
          <label>Password</label>
          <div class="password-wrapper">
            <input type="password" id="password" required />
            <i
              class="fa-solid fa-eye-slash toggle-password"
              id="togglePassword"
            ></i>
          </div>
          <p id="passwordHint" class="helper-text">
            Password must be 8-16 characters long.
          </p>
        </div>

        <div class="form-group">
          <label>Confirm Password</label>
          <div class="password-wrapper">
            <input type="password" id="confirmPassword" required />
            <i
              class="fa-solid fa-eye-slash toggle-password"
              id="toggleConfirmPassword"
            ></i>
          </div>
          <p id="matchHint" class="helper-text"></p>
        </div>

        <button type="submit" class="btn-register">Register Account</button>
      </form>
    </div>

    <script>
      // --- 1. Password Visibility ---
      function setupPasswordToggle(inputId, iconId) {
        const inputField = document.getElementById(inputId);
        const toggleIcon = document.getElementById(iconId);
        toggleIcon.addEventListener("click", function () {
          const type =
            inputField.getAttribute("type") === "password"
              ? "text"
              : "password";
          inputField.setAttribute("type", type);
          this.classList.toggle("fa-eye");
          this.classList.toggle("fa-eye-slash");
        });
      }
      setupPasswordToggle("password", "togglePassword");
      setupPasswordToggle("confirmPassword", "toggleConfirmPassword");

      // --- 2. Phone Number Restriction (Numbers Only) ---
      const phoneInput = document.getElementById("phoneInput");
      phoneInput.addEventListener("input", function () {
        // Replaces any non-digit character with nothing
        this.value = this.value.replace(/\D/g, "");
      });

      // --- 3. Password Validation & Match Check ---
      const password = document.getElementById("password");
      const confirmPassword = document.getElementById("confirmPassword");
      const passHint = document.getElementById("passwordHint");
      const matchHint = document.getElementById("matchHint");

      function checkPasswords() {
        // Length Validation
        const len = password.value.length;
        if (len === 0) {
          passHint.classList.remove("text-red", "text-green");
        } else if (len >= 8 && len <= 16) {
          passHint.classList.replace("text-red", "text-green") ||
            passHint.classList.add("text-green");
        } else {
          passHint.classList.replace("text-green", "text-red") ||
            passHint.classList.add("text-red");
        }

        // Match Validation
        if (confirmPassword.value.length > 0) {
          if (password.value === confirmPassword.value) {
            matchHint.innerText = "Passwords match!";
            matchHint.className = "helper-text text-green";
          } else {
            matchHint.innerText = "Passwords do not match!";
            matchHint.className = "helper-text text-red";
          }
        } else {
          matchHint.innerText = "";
        }
      }

      password.addEventListener("input", checkPasswords);
      confirmPassword.addEventListener("input", checkPasswords);

      // --- 4. Form Submit Prevention ---
      document
        .getElementById("registrationForm")
        .addEventListener("submit", function (e) {
          if (
            password.value !== confirmPassword.value ||
            password.value.length < 8
          ) {
            e.preventDefault();
            alert("Please correct the errors before registering.");
          }
        });
    </script>
  </body>
</html>